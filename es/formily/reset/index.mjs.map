{"version":3,"file":"index.mjs","sources":["../../../../../packages/formily/reset/index.ts"],"sourcesContent":["import { defineComponent, h } from 'vue'\nimport { IFieldResetOptions } from '@formily/core'\nimport { observer } from '@formily/reactive-vue'\nimport { useParentForm } from '@formily/vue'\nimport { ElButton } from 'element-plus'\nimport type { ButtonProps as ElButtonProps } from 'element-plus'\n\nexport type ResetProps = IFieldResetOptions & ElButtonProps\n\nexport const Reset = observer(\n  defineComponent<ResetProps>({\n    name: 'FReset',\n    inheritAttrs: false,\n    props: {\n      forceClear: {\n        type: Boolean,\n        default: false,\n      },\n      validate: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    setup(props, { attrs, slots }) {\n      const formRef = useParentForm()\n      return () => {\n        const form = formRef?.value\n        return h(\n          ElButton,\n          {\n            ...attrs,\n            onClick: (e: any) => {\n              if (attrs?.onClick) {\n                if ((attrs as any).onClick(e) === false) return\n              }\n              form\n                ?.reset('*', {\n                  forceClear: props.forceClear,\n                  validate: props.validate,\n                })\n                .then(attrs.onResetValidateSuccess as (e: any) => void)\n                .catch(attrs.onResetValidateFailed as (e: any) => void)\n            },\n          },\n          slots\n        )\n      }\n    },\n  })\n)\n\nexport default Reset\n"],"names":[],"mappings":";;;;;AASO,MAAM,KAAQ,GAAA,QAAA;AAAA,EACnB,eAA4B,CAAA;AAAA,IAC1B,IAAM,EAAA,QAAA;AAAA,IACN,YAAc,EAAA,KAAA;AAAA,IACd,KAAO,EAAA;AAAA,MACL,UAAY,EAAA;AAAA,QACV,IAAM,EAAA,OAAA;AAAA,QACN,OAAS,EAAA,KAAA;AAAA,OACX;AAAA,MACA,QAAU,EAAA;AAAA,QACR,IAAM,EAAA,OAAA;AAAA,QACN,OAAS,EAAA,KAAA;AAAA,OACX;AAAA,KACF;AAAA,IACA,KAAM,CAAA,KAAA,EAAO,EAAE,KAAA,EAAO,OAAS,EAAA;AAC7B,MAAA,MAAM,UAAU,aAAc,EAAA,CAAA;AAC9B,MAAA,OAAO,MAAM;AACX,QAAA,MAAM,OAAO,OAAS,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,OAAA,CAAA,KAAA,CAAA;AACtB,QAAO,OAAA,CAAA;AAAA,UACL,QAAA;AAAA,UACA;AAAA,YACE,GAAG,KAAA;AAAA,YACH,OAAA,EAAS,CAAC,CAAW,KAAA;AACnB,cAAA,IAAI,+BAAO,OAAS,EAAA;AAClB,gBAAK,IAAA,KAAA,CAAc,OAAQ,CAAA,CAAC,CAAM,KAAA,KAAA;AAAO,kBAAA,OAAA;AAAA,eAC3C;AACA,cAAA,IAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,IAAA,CACI,MAAM,GAAK,EAAA;AAAA,gBACX,YAAY,KAAM,CAAA,UAAA;AAAA,gBAClB,UAAU,KAAM,CAAA,QAAA;AAAA,eAEjB,CAAA,CAAA,IAAA,CAAK,KAAM,CAAA,sBAAA,CAAA,CACX,MAAM,KAAM,CAAA,qBAAA,CAAA,CAAA;AAAA,aACjB;AAAA,WACF;AAAA,UACA,KAAA;AAAA,SACF,CAAA;AAAA,OACF,CAAA;AAAA,KACF;AAAA,GACD,CAAA;AACH;;;;"}