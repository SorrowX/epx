{"version":3,"file":"index.js","sources":["../../../../../../../packages/components/editor/src/toolbar/index.vue"],"sourcesContent":["<template>\n  <div v-if=\"editor\" :class=\"ns.b()\">\n    <template v-for=\"key in toolbarList\" :key=\"key\">\n      <template v-if=\"key === 'emoji'\">\n        <ElEmoji @change=\"insertImage\">\n          <template #trigger>\n            <Icon\n              :icon=\"getValueByKey(key, 'icon')\"\n              :size=\"getValueByKey(key, 'size')\"\n            />\n          </template>\n        </ElEmoji>\n      </template>\n      <template v-else-if=\"key === 'image'\">\n        <Image />\n      </template>\n      <template v-else-if=\"key === 'video'\">\n        <Video />\n      </template>\n      <template v-else-if=\"key === 'link'\">\n        <Link />\n      </template>\n      <template v-else>\n        <Icon\n          :active=\"isActive(key)\"\n          :icon=\"getValueByKey(key, 'icon')\"\n          :size=\"getValueByKey(key, 'size')\"\n          @click=\"handleClick(key)\"\n        />\n      </template>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed } from 'vue'\nimport { useNamespace } from 'element-plus'\nimport { definePropType, isFunction } from '@element-plus/utils'\nimport { ElEmoji } from '@element-plus/components/emoji'\nimport * as IconsVue from '@element-plus/components/icons-vue/index'\nimport { provideToolBarContext } from '../hooks'\nimport Icon from './icon.vue'\nimport Image from './image/index.vue'\nimport Video from './video/index.vue'\nimport Link from './link/index.vue'\nimport type { IEditor, IToolbarConfigure, IToolbarList } from '../types'\n\nconst {\n  Bold,\n  Italic,\n  Bullet,\n  Ordered,\n  Blockquote,\n  Code,\n  Strike,\n  Undo,\n  Redo,\n  Emoji,\n  Underline,\n  Horizontal,\n  AlignLeft,\n  AlignRight,\n  AlignCenter,\n  AlignJustify,\n  Image: ImageIcon,\n} = IconsVue\n\nconst ns = useNamespace('editor-toolbar')\n\ndefineOptions({\n  name: 'ElEditorToolbar',\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  editor: {\n    type: definePropType<IEditor>(Object),\n    required: true,\n  },\n  toolbarList: {\n    type: definePropType<IToolbarList>(Array),\n    default: () => [\n      'bold', // 加粗\n      'strike', // 删除线\n      'italic', // 斜体\n      'underline', // 下划线\n      'link', // 链接\n      'ordered', // 有序列表\n      'bullet', // 无序列表\n      'blockquote', // 引用\n      'code', // 代码块\n      'horizontal', // 分割线\n      'alignLeft', // 左对齐\n      'alignRight', // 右对齐\n      'alignCenter', // 居中对象\n      'alignJustify', // 两端对齐\n      'emoji', // 表情\n      'image', // 图片\n      'video', // 视频\n      'undo', // 撤销\n      'redo', // 重做\n    ],\n  },\n  configure: {\n    type: definePropType<IToolbarConfigure>(Object),\n    default: () => ({}),\n  },\n})\n\nconst toolBarContext = computed(() => {\n  return {\n    editor: props.editor,\n    configure: props.configure,\n  }\n})\n\nprovideToolBarContext(toolBarContext)\n\nconst getEditor = () => {\n  return props.editor as any\n}\n\nconst commands: any = {\n  bold: {\n    type: 'bold',\n    icon: Bold,\n    command: () => getEditor().chain().focus().toggleBold().run(),\n    isActive: () => getEditor().isActive('bold'),\n    size: 18,\n  },\n  italic: {\n    type: 'italic',\n    icon: Italic,\n    command: () => getEditor().chain().focus().toggleItalic().run(),\n    isActive: () => getEditor().isActive('italic'),\n    size: 18,\n  },\n  bullet: {\n    type: 'bulletList',\n    icon: Bullet,\n    command: () => getEditor().chain().focus().toggleBulletList().run(),\n    isActive: () => getEditor().isActive('bulletList'),\n    size: 21,\n  },\n  ordered: {\n    type: 'orderedList',\n    icon: Ordered,\n    command: () => getEditor().chain().focus().toggleOrderedList().run(),\n    isActive: () => getEditor().isActive('orderedList'),\n    size: 21,\n  },\n  blockquote: {\n    type: 'blockquote',\n    icon: Blockquote,\n    command: () => getEditor().chain().focus().toggleBlockquote().run(),\n    isActive: () => getEditor().isActive('blockquote'),\n    size: 18,\n  },\n  code: {\n    type: 'codeBlock',\n    icon: Code,\n    command: () => getEditor().chain().focus().toggleCodeBlock().run(),\n    isActive: () => getEditor().isActive('codeBlock'),\n    size: 21,\n  },\n  strike: {\n    type: 'strike',\n    icon: Strike,\n    command: () => getEditor().chain().focus().toggleStrike().run(),\n    isActive: () => getEditor().isActive('strike'),\n    size: 18,\n  },\n  undo: {\n    type: 'undo',\n    icon: Undo,\n    command: () => getEditor().chain().focus().undo().run(),\n    isActive: () => false,\n    size: 18,\n  },\n  redo: {\n    type: 'redo',\n    icon: Redo,\n    command: () => getEditor().chain().focus().redo().run(),\n    isActive: () => false,\n    size: 18,\n  },\n  emoji: {\n    type: 'emoji',\n    icon: Emoji,\n    command: () => getEditor().chain().focus().redo().run(),\n    isActive: () => false,\n    size: 21,\n  },\n  underline: {\n    type: 'underline',\n    icon: Underline,\n    command: () => getEditor().chain().focus().toggleUnderline().run(),\n    isActive: () => getEditor().isActive('underline'),\n    size: 17,\n  },\n  horizontal: {\n    type: 'horizontal',\n    icon: Horizontal,\n    command: () => getEditor().chain().focus().setHorizontalRule().run(),\n    isActive: () => false,\n    size: 21,\n  },\n  alignLeft: {\n    type: 'alignLeft',\n    icon: AlignLeft,\n    command: () => {\n      if (commands.alignLeft.isActive()) {\n        getEditor().chain().focus().unsetTextAlign().run()\n      } else {\n        getEditor().chain().focus().setTextAlign('left').run()\n      }\n    },\n    isActive: () => getEditor().isActive({ textAlign: 'left' }),\n    size: 21,\n  },\n  alignRight: {\n    type: 'alignRight',\n    icon: AlignRight,\n    command: () => {\n      if (commands.alignRight.isActive()) {\n        getEditor().chain().focus().unsetTextAlign().run()\n      } else {\n        getEditor().chain().focus().setTextAlign('right').run()\n      }\n    },\n    isActive: () => getEditor().isActive({ textAlign: 'right' }),\n    size: 21,\n  },\n  alignCenter: {\n    type: 'alignCenter',\n    icon: AlignCenter,\n    command: () => {\n      if (commands.alignCenter.isActive()) {\n        getEditor().chain().focus().unsetTextAlign().run()\n      } else {\n        getEditor().chain().focus().setTextAlign('center').run()\n      }\n    },\n    isActive: () => getEditor().isActive({ textAlign: 'center' }),\n    size: 21,\n  },\n  alignJustify: {\n    type: 'alignJustify',\n    icon: AlignJustify,\n    command: () => {\n      if (commands.alignJustify.isActive()) {\n        getEditor().chain().focus().unsetTextAlign().run()\n      } else {\n        getEditor().chain().focus().setTextAlign('justify').run()\n      }\n    },\n    isActive: () => getEditor().isActive({ textAlign: 'justify' }),\n    size: 21,\n  },\n  image: {\n    type: 'image',\n    icon: ImageIcon,\n    command: () => getEditor().chain().focus().undo().run(),\n    isActive: () => false,\n    size: 21,\n  },\n}\n\nconst handleClick = (key: string) => {\n  const item = commands[key]\n  item.command()\n}\n\nconst isActive = (key: string) => {\n  const item = commands[key]\n  return item.isActive()\n}\n\nconst getValueByKey = (key: string, prop: string) => {\n  const item = commands[key]\n  return isFunction(item[prop]) ? item[prop]() : item[prop]\n}\n\nconst insertImage = (item: any) => {\n  getEditor()\n    .chain()\n    .focus()\n    .setImage({\n      src: item.image,\n      alt: item.text,\n    })\n    .run()\n}\n</script>\n"],"names":["IconsVue","useNamespace","computed","provideToolBarContext","isFunction"],"mappings":";;;;;;;;;;;;;;;;uCAqEc,CAAA;AAAA,EACZ,IAAM,EAAA,iBAAA;AAAA,EACN,YAAc,EAAA,KAAA;AAChB,CAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAzBM,IAAA,MAAA;AAAA,MACJ,IAAA;AAAA,MACA,MAAA;AAAA,MACA,MAAA;AAAA,MACA,OAAA;AAAA,MACA,UAAA;AAAA,MACA,IAAA;AAAA,MACA,MAAA;AAAA,MACA,IAAA;AAAA,MACA,IAAA;AAAA,MACA,KAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,MACA,WAAA;AAAA,MACA,YAAA;AAAA,MACA,KAAO,EAAA,SAAA;AAAA,KACL,GAAAA,OAAA,CAAA;AAEE,IAAA,MAAA,EAAA,GAAKC,yBAAa,gBAAgB,CAAA,CAAA;AAOxC,IAAA,MAAM,KAAQ,GAAA,OAAA,CAAA;AAmCR,IAAA,MAAA,cAAA,GAAiBC,aAAS,MAAM;AAC7B,MAAA,OAAA;AAAA,QACL,QAAQ,KAAM,CAAA,MAAA;AAAA,QACd,WAAW,KAAM,CAAA,SAAA;AAAA,OACnB,CAAA;AAAA,KACD,CAAA,CAAA;AAED,IAAAC,2BAAA,CAAsB,cAAc,CAAA,CAAA;AAEpC,IAAA,MAAM,YAAY,MAAM;AACtB,MAAA,OAAO,KAAM,CAAA,MAAA,CAAA;AAAA,KACf,CAAA;AAEA,IAAA,MAAM,QAAgB,GAAA;AAAA,MACpB,IAAM,EAAA;AAAA,QACJ,IAAM,EAAA,MAAA;AAAA,QACN,IAAM,EAAA,IAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,UAAW,EAAA,CAAE,GAAI,EAAA;AAAA,QAC5D,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,MAAM,CAAA;AAAA,QAC3C,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,MAAQ,EAAA;AAAA,QACN,IAAM,EAAA,QAAA;AAAA,QACN,IAAM,EAAA,MAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,YAAa,EAAA,CAAE,GAAI,EAAA;AAAA,QAC9D,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,QAAQ,CAAA;AAAA,QAC7C,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,MAAQ,EAAA;AAAA,QACN,IAAM,EAAA,YAAA;AAAA,QACN,IAAM,EAAA,MAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,gBAAiB,EAAA,CAAE,GAAI,EAAA;AAAA,QAClE,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,YAAY,CAAA;AAAA,QACjD,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,OAAS,EAAA;AAAA,QACP,IAAM,EAAA,aAAA;AAAA,QACN,IAAM,EAAA,OAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,iBAAkB,EAAA,CAAE,GAAI,EAAA;AAAA,QACnE,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,aAAa,CAAA;AAAA,QAClD,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,UAAY,EAAA;AAAA,QACV,IAAM,EAAA,YAAA;AAAA,QACN,IAAM,EAAA,UAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,gBAAiB,EAAA,CAAE,GAAI,EAAA;AAAA,QAClE,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,YAAY,CAAA;AAAA,QACjD,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,IAAM,EAAA;AAAA,QACJ,IAAM,EAAA,WAAA;AAAA,QACN,IAAM,EAAA,IAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,eAAgB,EAAA,CAAE,GAAI,EAAA;AAAA,QACjE,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,WAAW,CAAA;AAAA,QAChD,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,MAAQ,EAAA;AAAA,QACN,IAAM,EAAA,QAAA;AAAA,QACN,IAAM,EAAA,MAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,YAAa,EAAA,CAAE,GAAI,EAAA;AAAA,QAC9D,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,QAAQ,CAAA;AAAA,QAC7C,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,IAAM,EAAA;AAAA,QACJ,IAAM,EAAA,MAAA;AAAA,QACN,IAAM,EAAA,IAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,IAAK,EAAA,CAAE,GAAI,EAAA;AAAA,QACtD,UAAU,MAAM,KAAA;AAAA,QAChB,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,IAAM,EAAA;AAAA,QACJ,IAAM,EAAA,MAAA;AAAA,QACN,IAAM,EAAA,IAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,IAAK,EAAA,CAAE,GAAI,EAAA;AAAA,QACtD,UAAU,MAAM,KAAA;AAAA,QAChB,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,KAAO,EAAA;AAAA,QACL,IAAM,EAAA,OAAA;AAAA,QACN,IAAM,EAAA,KAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,IAAK,EAAA,CAAE,GAAI,EAAA;AAAA,QACtD,UAAU,MAAM,KAAA;AAAA,QAChB,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,SAAW,EAAA;AAAA,QACT,IAAM,EAAA,WAAA;AAAA,QACN,IAAM,EAAA,SAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,eAAgB,EAAA,CAAE,GAAI,EAAA;AAAA,QACjE,QAAU,EAAA,MAAM,SAAU,EAAA,CAAE,SAAS,WAAW,CAAA;AAAA,QAChD,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,UAAY,EAAA;AAAA,QACV,IAAM,EAAA,YAAA;AAAA,QACN,IAAM,EAAA,UAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,iBAAkB,EAAA,CAAE,GAAI,EAAA;AAAA,QACnE,UAAU,MAAM,KAAA;AAAA,QAChB,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,SAAW,EAAA;AAAA,QACT,IAAM,EAAA,WAAA;AAAA,QACN,IAAM,EAAA,SAAA;AAAA,QACN,SAAS,MAAM;AACT,UAAA,IAAA,QAAA,CAAS,SAAU,CAAA,QAAA,EAAY,EAAA;AACjC,YAAA,SAAA,GAAY,KAAM,EAAA,CAAE,OAAQ,CAAA,cAAA,GAAiB,GAAI,EAAA,CAAA;AAAA,WAC5C,MAAA;AACK,YAAA,SAAA,EAAA,CAAE,OAAQ,CAAA,KAAA,GAAQ,YAAa,CAAA,MAAM,EAAE,GAAI,EAAA,CAAA;AAAA,WACvD;AAAA,SACF;AAAA,QACA,QAAA,EAAU,MAAM,SAAU,EAAA,CAAE,SAAS,EAAE,SAAA,EAAW,QAAQ,CAAA;AAAA,QAC1D,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,UAAY,EAAA;AAAA,QACV,IAAM,EAAA,YAAA;AAAA,QACN,IAAM,EAAA,UAAA;AAAA,QACN,SAAS,MAAM;AACT,UAAA,IAAA,QAAA,CAAS,UAAW,CAAA,QAAA,EAAY,EAAA;AAClC,YAAA,SAAA,GAAY,KAAM,EAAA,CAAE,OAAQ,CAAA,cAAA,GAAiB,GAAI,EAAA,CAAA;AAAA,WAC5C,MAAA;AACK,YAAA,SAAA,EAAA,CAAE,OAAQ,CAAA,KAAA,GAAQ,YAAa,CAAA,OAAO,EAAE,GAAI,EAAA,CAAA;AAAA,WACxD;AAAA,SACF;AAAA,QACA,QAAA,EAAU,MAAM,SAAU,EAAA,CAAE,SAAS,EAAE,SAAA,EAAW,SAAS,CAAA;AAAA,QAC3D,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,WAAa,EAAA;AAAA,QACX,IAAM,EAAA,aAAA;AAAA,QACN,IAAM,EAAA,WAAA;AAAA,QACN,SAAS,MAAM;AACT,UAAA,IAAA,QAAA,CAAS,WAAY,CAAA,QAAA,EAAY,EAAA;AACnC,YAAA,SAAA,GAAY,KAAM,EAAA,CAAE,OAAQ,CAAA,cAAA,GAAiB,GAAI,EAAA,CAAA;AAAA,WAC5C,MAAA;AACK,YAAA,SAAA,EAAA,CAAE,OAAQ,CAAA,KAAA,GAAQ,YAAa,CAAA,QAAQ,EAAE,GAAI,EAAA,CAAA;AAAA,WACzD;AAAA,SACF;AAAA,QACA,QAAA,EAAU,MAAM,SAAU,EAAA,CAAE,SAAS,EAAE,SAAA,EAAW,UAAU,CAAA;AAAA,QAC5D,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,YAAc,EAAA;AAAA,QACZ,IAAM,EAAA,cAAA;AAAA,QACN,IAAM,EAAA,YAAA;AAAA,QACN,SAAS,MAAM;AACT,UAAA,IAAA,QAAA,CAAS,YAAa,CAAA,QAAA,EAAY,EAAA;AACpC,YAAA,SAAA,GAAY,KAAM,EAAA,CAAE,OAAQ,CAAA,cAAA,GAAiB,GAAI,EAAA,CAAA;AAAA,WAC5C,MAAA;AACK,YAAA,SAAA,EAAA,CAAE,OAAQ,CAAA,KAAA,GAAQ,YAAa,CAAA,SAAS,EAAE,GAAI,EAAA,CAAA;AAAA,WAC1D;AAAA,SACF;AAAA,QACA,QAAA,EAAU,MAAM,SAAU,EAAA,CAAE,SAAS,EAAE,SAAA,EAAW,WAAW,CAAA;AAAA,QAC7D,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,MACA,KAAO,EAAA;AAAA,QACL,IAAM,EAAA,OAAA;AAAA,QACN,IAAM,EAAA,SAAA;AAAA,QACN,OAAA,EAAS,MAAM,SAAA,EAAY,CAAA,KAAA,GAAQ,KAAM,EAAA,CAAE,IAAK,EAAA,CAAE,GAAI,EAAA;AAAA,QACtD,UAAU,MAAM,KAAA;AAAA,QAChB,IAAM,EAAA,EAAA;AAAA,OACR;AAAA,KACF,CAAA;AAEM,IAAA,MAAA,WAAA,GAAc,CAAC,GAAgB,KAAA;AAC7B,MAAA,MAAA,OAAO,QAAS,CAAA,GAAA,CAAA,CAAA;AACtB,MAAA,IAAA,CAAK,OAAQ,EAAA,CAAA;AAAA,KACf,CAAA;AAEM,IAAA,MAAA,QAAA,GAAW,CAAC,GAAgB,KAAA;AAC1B,MAAA,MAAA,OAAO,QAAS,CAAA,GAAA,CAAA,CAAA;AACtB,MAAA,OAAO,KAAK,QAAS,EAAA,CAAA;AAAA,KACvB,CAAA;AAEM,IAAA,MAAA,aAAA,GAAgB,CAAC,GAAA,EAAa,IAAiB,KAAA;AAC7C,MAAA,MAAA,OAAO,QAAS,CAAA,GAAA,CAAA,CAAA;AACf,MAAA,OAAAC,iBAAW,IAAK,CAAA,IAAA,CAAK,IAAI,IAAK,CAAA,IAAA,CAAA,KAAU,IAAK,CAAA,IAAA,CAAA,CAAA;AAAA,KACtD,CAAA;AAEM,IAAA,MAAA,WAAA,GAAc,CAAC,IAAc,KAAA;AACjC,MAAA,SAAA,EACG,CAAA,KAAA,EACA,CAAA,KAAA,GACA,QAAS,CAAA;AAAA,QACR,KAAK,IAAK,CAAA,KAAA;AAAA,QACV,KAAK,IAAK,CAAA,IAAA;AAAA,OACX,EACA,GAAI,EAAA,CAAA;AAAA,KACT,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}