{"version":3,"file":"moveup.js","sources":["../../../../../../packages/components/array-base/src/moveup.ts"],"sourcesContent":["import { defineComponent, h } from 'vue'\nimport { ElButton, useNamespace } from 'element-plus'\nimport { ArrowUp } from '@element-plus/icons-vue'\nimport { useArray, useIndex } from './hooks'\n\nexport type IArrayBaseMoveUpProps = {\n  title?: string\n  index?: number\n}\n\nexport const ArrayBaseMoveUp = defineComponent<IArrayBaseMoveUpProps>({\n  name: 'ArrayBaseMoveUp',\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n    index: {\n      type: Number,\n    },\n  },\n  setup(props, { attrs, slots }) {\n    const ns = useNamespace('array-base')\n    const indexRef = useIndex(props.index)\n    const { field, form, keyMap } = useArray()\n    return () => {\n      if (!field) return null\n      return h(\n        ElButton,\n        {\n          class: `${ns.b('move-up')}`,\n          size: 'small',\n          link: true,\n          icon: ArrowUp,\n          disabled: form?.disabled,\n          onClick: (evt: MouseEvent) => {\n            if (attrs.onClick) {\n              return (attrs as any).onClick?.(evt, { field, form, keyMap })\n            }\n            if (form?.disabled) return\n            evt.stopPropagation()\n            const curIndex = indexRef.value\n\n            if (Array.isArray(keyMap)) {\n              const length = keyMap.length - 1\n              let preIndex = indexRef.value - 1\n              preIndex = preIndex < 0 ? length : preIndex\n              keyMap.splice(preIndex, 0, keyMap.splice(curIndex, 1)[0])\n            }\n            if (Array.isArray(field.fieldValue)) {\n              const length = field.fieldValue.length - 1\n              let preIndex = indexRef.value - 1\n              preIndex = preIndex < 0 ? length : preIndex\n              field.fieldValue.splice(\n                preIndex,\n                0,\n                field.fieldValue.splice(curIndex, 1)[0]\n              )\n            }\n          },\n          ...attrs,\n        },\n        {\n          default: () => [slots?.default?.() ?? props.title],\n        }\n      )\n    }\n  },\n})\n"],"names":["defineComponent","useNamespace","useIndex","useArray","h","ElButton","ArrowUp"],"mappings":"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"}